/* ============================================================================
   IONIC + TAILWIND + SHADCN/UI INTEGRATION
   Optimized architecture: Ionic CSS variables as single source of truth
   ============================================================================ */

/* Ionic Core CSS - Minimal setup for web component functionality */
@import "@ionic/react/css/core.css";

/* Ionic Dark Mode - Class-based palette (requires .ion-palette-dark on html) */
@import "@ionic/react/css/palettes/dark.class.css";

/* Tailwind CSS */
@import "tailwindcss";
@import "tw-animate-css";

@source "./src/**/*.{js,jsx,ts,tsx}";

/* ============================================================================
   LIGHT MODE THEME - Exact HSL values from shadcn design system
   ============================================================================ */
:root {
  /* Core Ionic colors - Foundation from shadcn tokens */
  --ion-background-color: hsl(204 12.1951% 91.9608%);
  --ion-text-color: hsl(0 0% 20%);
  --ion-border-color: hsl(210 9.375% 87.451%);

  /* Ionic semantic colors - from shadcn primary */
  --ion-color-primary: hsl(13.2143 73.0435% 54.902%);
  --ion-color-primary-rgb: 237, 93, 56;
  --ion-color-primary-contrast: hsl(0 0% 100%);
  --ion-color-primary-contrast-rgb: 255, 255, 255;
  --ion-color-primary-shade: hsl(13.2143 73.0435% 49%);
  --ion-color-primary-tint: hsl(13.2143 73.0435% 62%);

  /* Secondary - from shadcn secondary */
  --ion-color-secondary: hsl(220 14.2857% 95.8824%);
  --ion-color-secondary-rgb: 241, 242, 245;
  --ion-color-secondary-contrast: hsl(215 13.7931% 34.1176%);
  --ion-color-secondary-contrast-rgb: 75, 80, 99;
  --ion-color-secondary-shade: hsl(220 14.2857% 86%);
  --ion-color-secondary-tint: hsl(220 14.2857% 98%);

  /* Tertiary - from shadcn muted */
  --ion-color-tertiary: hsl(210 20% 98.0392%);
  --ion-color-tertiary-rgb: 248, 249, 250;
  --ion-color-tertiary-contrast: hsl(220 8.9362% 46.0784%);
  --ion-color-tertiary-contrast-rgb: 106, 110, 125;
  --ion-color-tertiary-shade: hsl(210 20% 88%);
  --ion-color-tertiary-tint: hsl(210 20% 99%);

  /* Success - keep green */
  --ion-color-success: hsl(142 76% 36%);
  --ion-color-success-rgb: 22, 163, 74;
  --ion-color-success-contrast: hsl(0 0% 100%);
  --ion-color-success-contrast-rgb: 255, 255, 255;
  --ion-color-success-shade: hsl(142 76% 32%);
  --ion-color-success-tint: hsl(142 76% 45%);

  /* Warning - use primary */
  --ion-color-warning: hsl(13.2143 73.0435% 54.902%);
  --ion-color-warning-rgb: 237, 93, 56;
  --ion-color-warning-contrast: hsl(0 0% 100%);
  --ion-color-warning-contrast-rgb: 255, 255, 255;
  --ion-color-warning-shade: hsl(13.2143 73.0435% 49%);
  --ion-color-warning-tint: hsl(13.2143 73.0435% 62%);

  /* Danger - Crimson for maximum distinction from orange primary (345° vs 13° = 332° separation) */
  --ion-color-danger: hsl(345 82% 48%);
  --ion-color-danger-rgb: 216, 27, 96;
  --ion-color-danger-contrast: hsl(0 0% 100%);
  --ion-color-danger-contrast-rgb: 255, 255, 255;
  --ion-color-danger-shade: hsl(345 82% 43%);
  --ion-color-danger-tint: hsl(345 82% 55%);

  /* Ionic component-specific */
  --ion-card-background: hsl(0 0% 100%);
  --ion-item-background: hsl(0 0% 100%);
  --ion-toolbar-background: hsl(0 0% 100%);
  --ion-tab-bar-background: hsl(0 0% 100%);
  --ion-tab-bar-border-color: hsl(210 9.375% 87.451%);

  /* Additional app colors - from shadcn tokens */
  --ion-color-muted: hsl(210 20% 98.0392%);
  --ion-color-muted-foreground: hsl(220 8.9362% 46.0784%);
  --ion-color-accent: hsl(207.6923 46.4286% 89.0196%);
  --ion-color-accent-foreground: hsl(224.4444 64.2857% 32.9412%);
  --ion-color-popover: hsl(0 0% 100%);
  --ion-color-popover-foreground: hsl(0 0% 20%);

  /* Domain-specific colors - keep existing */
  --ion-color-expense: hsl(345 82% 48%);
  --ion-color-expense-foreground: hsl(345 82% 48%);
  --ion-color-expense-light: hsl(345 82% 96%);

  --ion-color-income: hsl(142 76% 36%);
  --ion-color-income-foreground: hsl(142 76% 36%);
  --ion-color-income-light: hsl(142 76% 96%);

  --ion-color-dashboard: hsl(217 91% 60%);
  --ion-color-dashboard-foreground: hsl(217 91% 60%);
  --ion-color-dashboard-light: hsl(217 91% 96%);

  --ion-color-savings: hsl(13.2143 73.0435% 54.902%);
  --ion-color-savings-foreground: hsl(13.2143 73.0435% 54.902%);

  --ion-color-net-balance-positive: hsl(217 91% 60%);
  --ion-color-net-balance-negative: hsl(345 82% 48%);

  /* Design tokens - from shadcn */
  --radius: 0.75rem;

  /* Shadows - from shadcn */
  --shadow-2xs: 0px 1px 3px 0px hsl(0 0% 0% / 0.05);
  --shadow-xs: 0px 1px 3px 0px hsl(0 0% 0% / 0.05);
  --shadow-sm: 0px 1px 3px 0px hsl(0 0% 0% / 0.1), 0px 1px 2px -1px hsl(0 0% 0% / 0.1);
  --shadow: 0px 1px 3px 0px hsl(0 0% 0% / 0.1), 0px 1px 2px -1px hsl(0 0% 0% / 0.1);
  --shadow-md: 0px 1px 3px 0px hsl(0 0% 0% / 0.1), 0px 2px 4px -1px hsl(0 0% 0% / 0.1);
  --shadow-lg: 0px 1px 3px 0px hsl(0 0% 0% / 0.1), 0px 4px 6px -1px hsl(0 0% 0% / 0.1);
  --shadow-xl: 0px 1px 3px 0px hsl(0 0% 0% / 0.1), 0px 8px 10px -1px hsl(0 0% 0% / 0.1);
  --shadow-2xl: 0px 1px 3px 0px hsl(0 0% 0% / 0.25);
}

/* ============================================================================
   DARK MODE THEME - Exact HSL values from shadcn design system
   ============================================================================ */
[data-theme="dark"] {
  /* Core Ionic colors - from shadcn dark tokens */
  --ion-background-color: hsl(219.1304 29.1139% 15.4902%);
  --ion-text-color: hsl(0 0% 89.8039%);
  --ion-border-color: hsl(224.3478 15.8621% 28.4314%);

  /* Ionic semantic colors - from shadcn dark primary */
  --ion-color-primary: hsl(13.2143 73.0435% 54.902%);
  --ion-color-primary-rgb: 237, 93, 56;
  --ion-color-primary-contrast: hsl(0 0% 100%);
  --ion-color-primary-contrast-rgb: 255, 255, 255;
  --ion-color-primary-shade: hsl(13.2143 73.0435% 49%);
  --ion-color-primary-tint: hsl(13.2143 73.0435% 62%);

  /* Secondary - from shadcn dark secondary */
  --ion-color-secondary: hsl(222 19.2308% 20.3922%);
  --ion-color-secondary-rgb: 41, 45, 55;
  --ion-color-secondary-contrast: hsl(0 0% 89.8039%);
  --ion-color-secondary-contrast-rgb: 229, 229, 229;
  --ion-color-secondary-shade: hsl(222 19.2308% 18%);
  --ion-color-secondary-tint: hsl(222 19.2308% 25%);

  /* Tertiary - from shadcn dark muted */
  --ion-color-tertiary: hsl(222 19.2308% 20.3922%);
  --ion-color-tertiary-rgb: 41, 45, 55;
  --ion-color-tertiary-contrast: hsl(0 0% 63.9216%);
  --ion-color-tertiary-contrast-rgb: 163, 163, 163;
  --ion-color-tertiary-shade: hsl(222 19.2308% 18%);
  --ion-color-tertiary-tint: hsl(222 19.2308% 25%);

  /* Success - vibrant green for dark mode toasts (improved visibility) */
  --ion-color-success: hsl(142 70% 50%);
  --ion-color-success-rgb: 38, 217, 98;
  --ion-color-success-contrast: hsl(0 0% 100%);
  --ion-color-success-contrast-rgb: 255, 255, 255;
  --ion-color-success-shade: hsl(142 70% 45%);
  --ion-color-success-tint: hsl(142 70% 60%);

  /* Warning - brighter orange for dark mode toasts (better contrast) */
  --ion-color-warning: hsl(13.2143 85% 62%);
  --ion-color-warning-rgb: 247, 114, 69;
  --ion-color-warning-contrast: hsl(0 0% 100%);
  --ion-color-warning-contrast-rgb: 255, 255, 255;
  --ion-color-warning-shade: hsl(13.2143 85% 57%);
  --ion-color-warning-tint: hsl(13.2143 85% 70%);

  /* Danger - vibrant crimson for dark mode toasts (enhanced visibility) */
  --ion-color-danger: hsl(345 85% 55%);
  --ion-color-danger-rgb: 240, 40, 115;
  --ion-color-danger-contrast: hsl(0 0% 100%);
  --ion-color-danger-contrast-rgb: 255, 255, 255;
  --ion-color-danger-shade: hsl(345 85% 50%);
  --ion-color-danger-tint: hsl(345 85% 65%);

  /* Ionic component-specific - from shadcn dark card */
  --ion-card-background: hsl(223.6364 20.7547% 20.7843%);
  --ion-item-background: hsl(223.6364 20.7547% 20.7843%);
  --ion-toolbar-background: hsl(219.1304 29.1139% 15.4902%);
  --ion-tab-bar-background: hsl(219.1304 29.1139% 15.4902%);
  --ion-tab-bar-border-color: hsl(224.3478 15.8621% 28.4314%);

  /* Additional app colors - from shadcn dark tokens */
  --ion-color-muted: hsl(222 19.2308% 20.3922%);
  --ion-color-muted-foreground: hsl(0 0% 63.9216%);
  --ion-color-accent: hsl(223.6364 34.375% 25.098%);
  --ion-color-accent-foreground: hsl(213.3333 96.9231% 87.2549%);
  --ion-color-popover: hsl(223.3333 19.1489% 18.4314%);
  --ion-color-popover-foreground: hsl(0 0% 89.8039%);

  /* Domain-specific colors - brighter for dark mode */
  --ion-color-expense: hsl(345 82% 48%);
  --ion-color-expense-foreground: hsl(345 82% 58%);
  --ion-color-expense-light: hsl(345 82% 20%);

  --ion-color-income: hsl(142 76% 46%);
  --ion-color-income-foreground: hsl(142 76% 56%);
  --ion-color-income-light: hsl(142 76% 20%);

  --ion-color-dashboard: hsl(217 91% 70%);
  --ion-color-dashboard-foreground: hsl(217 91% 70%);
  --ion-color-dashboard-light: hsl(217 91% 20%);

  --ion-color-savings: hsl(13.2143 73.0435% 62%);
  --ion-color-savings-foreground: hsl(13.2143 73.0435% 62%);

  --ion-color-net-balance-positive: hsl(217 91% 70%);
  --ion-color-net-balance-negative: hsl(345 82% 48%);

  /* Shadows - same as light mode */
  --shadow-2xs: 0px 1px 3px 0px hsl(0 0% 0% / 0.05);
  --shadow-xs: 0px 1px 3px 0px hsl(0 0% 0% / 0.05);
  --shadow-sm: 0px 1px 3px 0px hsl(0 0% 0% / 0.1), 0px 1px 2px -1px hsl(0 0% 0% / 0.1);
  --shadow: 0px 1px 3px 0px hsl(0 0% 0% / 0.1), 0px 1px 2px -1px hsl(0 0% 0% / 0.1);
  --shadow-md: 0px 1px 3px 0px hsl(0 0% 0% / 0.1), 0px 2px 4px -1px hsl(0 0% 0% / 0.1);
  --shadow-lg: 0px 1px 3px 0px hsl(0 0% 0% / 0.1), 0px 4px 6px -1px hsl(0 0% 0% / 0.1);
  --shadow-xl: 0px 1px 3px 0px hsl(0 0% 0% / 0.1), 0px 8px 10px -1px hsl(0 0% 0% / 0.1);
  --shadow-2xl: 0px 1px 3px 0px hsl(0 0% 0% / 0.25);
}

/* ============================================================================
   TAILWIND THEME - Map to Ionic variables
   Single source of truth: Ionic CSS variables
   ============================================================================ */
@theme inline {
  /* Map shadcn/ui colors to Ionic variables */
  --color-background: var(--ion-background-color);
  --color-foreground: var(--ion-text-color);
  --color-border: var(--ion-border-color);
  --color-input: var(--ion-border-color);
  --color-ring: var(--ion-color-primary);

  --color-card: var(--ion-card-background);
  --color-card-foreground: var(--ion-text-color);

  --color-popover: var(--ion-color-popover);
  --color-popover-foreground: var(--ion-color-popover-foreground);

  --color-primary: var(--ion-color-primary);
  --color-primary-foreground: var(--ion-color-primary-contrast);

  --color-secondary: var(--ion-color-secondary);
  --color-secondary-foreground: var(--ion-color-secondary-contrast);

  --color-muted: var(--ion-color-muted);
  --color-muted-foreground: var(--ion-color-muted-foreground);

  --color-accent: var(--ion-color-accent);
  --color-accent-foreground: var(--ion-color-accent-foreground);

  --color-destructive: var(--ion-color-danger);
  --color-destructive-foreground: var(--ion-color-danger-contrast);

  /* Domain colors */
  --color-expense: var(--ion-color-expense);
  --color-expense-foreground: var(--ion-color-expense-foreground);
  --color-expense-light: var(--ion-color-expense-light);

  --color-income: var(--ion-color-income);
  --color-income-foreground: var(--ion-color-income-foreground);
  --color-income-light: var(--ion-color-income-light);

  --color-dashboard: var(--ion-color-dashboard);
  --color-dashboard-foreground: var(--ion-color-dashboard-foreground);
  --color-dashboard-light: var(--ion-color-dashboard-light);

  --color-savings: var(--ion-color-savings);
  --color-savings-foreground: var(--ion-color-savings-foreground);

  --color-net-balance-positive: var(--ion-color-net-balance-positive);
  --color-net-balance-negative: var(--ion-color-net-balance-negative);

  /* Chart colors - from shadcn */
  --color-chart-1: hsl(210 37.5% 65.4902%);
  --color-chart-2: hsl(12.9032 73.2283% 75.098%);
  --color-chart-3: hsl(213.1579 29.9213% 50.1961%);
  --color-chart-4: hsl(216.9231 35.7798% 42.7451%);
  --color-chart-5: hsl(221.0127 43.6464% 35.4902%);

  /* Sidebar colors (for future use) */
  --color-sidebar: var(--ion-color-secondary);
  --color-sidebar-foreground: var(--ion-color-secondary-contrast);
  --color-sidebar-primary: var(--ion-color-primary);
  --color-sidebar-primary-foreground: var(--ion-color-primary-contrast);
  --color-sidebar-accent: var(--ion-color-accent);
  --color-sidebar-accent-foreground: var(--ion-color-accent-foreground);
  --color-sidebar-border: var(--ion-border-color);
  --color-sidebar-ring: var(--ion-color-primary);

  /* Border radius - from shadcn */
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);

  /* Shadows - full system */
  --shadow-2xs: var(--shadow-2xs);
  --shadow-xs: var(--shadow-xs);
  --shadow-sm: var(--shadow-sm);
  --shadow: var(--shadow);
  --shadow-md: var(--shadow-md);
  --shadow-lg: var(--shadow-lg);
  --shadow-xl: var(--shadow-xl);
  --shadow-2xl: var(--shadow-2xl);
}

/* ============================================================================
   BASE STYLES - Simplified (no normalize.css conflicts)
   ============================================================================ */
@layer base {
  body {
    background-color: var(--ion-background-color);
    color: var(--ion-text-color);
  }

  * {
    border-color: var(--ion-border-color);
  }

  /* General cursor styles */
  button {
    cursor: pointer;

    &:disabled {
      cursor: not-allowed;
    }
  }
}

/* ============================================================================
   IONIC COMPONENT CUSTOMIZATIONS
   ============================================================================ */
@layer components {
  /* Tab navigation - Custom colors per tab */
  ion-tab-button {
    --color: var(--ion-color-muted-foreground);
    --color-selected: var(--ion-color-primary);
    --ripple-color: var(--ion-color-primary);
  }

  ion-tab-button[tab="dashboard"] {
    --color-selected: var(--ion-color-dashboard);
    --ripple-color: var(--ion-color-dashboard);
  }

  ion-tab-button[tab="expenses"] {
    --color-selected: var(--ion-color-expense);
    --ripple-color: var(--ion-color-expense);
  }

  ion-tab-button[tab="income"] {
    --color-selected: var(--ion-color-income);
    --ripple-color: var(--ion-color-income);
  }

  /* Ensure Ionic components follow theme */
  ion-content {
    --background: var(--ion-background-color);
  }

  ion-card {
    --background: var(--ion-card-background);
    --color: var(--ion-text-color);
  }

  /* Make lists transparent - items will have their own backgrounds */
  ion-list,
  ion-list.list-ios {
    --background: transparent !important;
    --ion-background-color: transparent !important;
    background: transparent !important;
  }

  ion-item {
    --background: var(--ion-card-background);
    --ion-background-color: var(--ion-card-background);
    --color: var(--ion-text-color);
    --border-color: var(--ion-border-color);
  }

  ion-toolbar {
    --background: var(--ion-toolbar-background);
    --color: var(--ion-text-color);
    --border-color: var(--ion-border-color);
  }

  ion-tab-bar {
    --background: var(--ion-tab-bar-background);
    --border: 1px solid var(--ion-tab-bar-border-color);
  }

  /* IonInput with fill="outline" styling */
  ion-input[fill="outline"] {
    --border-radius: 0.5rem;
    --padding-start: 12px;
    --padding-end: 12px;
  }

  /* IonInput validation states */
  ion-input.ion-input-error {
    --border-color: var(--ion-color-danger);
    --highlight-color: var(--ion-color-danger);
  }

  ion-input.ion-input-success {
    --border-color: var(--ion-color-success);
    --highlight-color: var(--ion-color-success);
  }

  /* IonInput filter button styling - matches category button select */
  ion-input.ion-input-filter-button {
    --placeholder-color: var(--ion-color-medium);
    --placeholder-opacity: 1;
    --color: var(--ion-color-primary);
    display: flex;
    align-items: center;
    justify-content: center;
  }

  /* Center the text and placeholder inside filter button input */
  ion-input.ion-input-filter-button input {
    text-align: center !important;
    color: var(--ion-color-primary) !important;
  }

  ion-input.ion-input-filter-button input::placeholder {
    text-align: center !important;
    color: var(--ion-color-medium) !important;
  }

  /* Position icon to the left */
  ion-input.ion-input-filter-button ion-icon[slot="start"] {
    position: absolute;
    left: 12px;
    color: var(--ion-color-primary);
  }

  /* Toast positioning - below page header */
  ion-toast.toast-below-header,
  ion-toast.toast-below-header::part(container),
  .toast-below-header.toast-wrapper {
    top: calc(56px + var(--safe-area-inset-top, env(safe-area-inset-top)) + 8px) !important;
  }
}
