/* ============================================================================
   IONIC + TAILWIND + SHADCN/UI INTEGRATION
   Optimized architecture: Ionic CSS variables as single source of truth
   ============================================================================ */

/* Ionic Core CSS - Minimal setup for web component functionality */
@import "@ionic/react/css/core.css";

/* Ionic Dark Mode - Class-based palette (requires .ion-palette-dark on html) */
@import "@ionic/react/css/palettes/dark.class.css";

/* Tailwind CSS */
@import "tailwindcss";
@import "tw-animate-css";

@source "./src/**/*.{js,jsx,ts,tsx}";

/* ============================================================================
   LIGHT MODE THEME - Exact HSL values from design system
   ============================================================================ */
:root {
  /* Core Ionic colors - Foundation for everything */
  --ion-background-color: hsl(280 33.3333% 96.4706%);
  --ion-text-color: hsl(216.9231 19.1176% 26.6667%);
  --ion-border-color: hsl(267.5676 90.2439% 91.9608%);

  /* Ionic semantic colors */
  --ion-color-primary: hsl(255.1351 91.7355% 76.2745%);
  --ion-color-primary-rgb: 161, 57, 245;
  --ion-color-primary-contrast: hsl(0 0% 100%);
  --ion-color-primary-contrast-rgb: 255, 255, 255;
  --ion-color-primary-shade: hsl(255.1351 91.7355% 68%);
  --ion-color-primary-tint: hsl(255.1351 91.7355% 82%);

  --ion-color-secondary: hsl(267.5676 90.2439% 91.9608%);
  --ion-color-secondary-rgb: 232, 217, 247;
  --ion-color-secondary-contrast: hsl(215 13.7931% 34.1176%);
  --ion-color-secondary-contrast-rgb: 75, 80, 99;
  --ion-color-secondary-shade: hsl(267.5676 90.2439% 83%);
  --ion-color-secondary-tint: hsl(267.5676 90.2439% 95%);

  --ion-color-tertiary: hsl(268.6957 100% 95.4902%);
  --ion-color-tertiary-rgb: 243, 231, 255;
  --ion-color-tertiary-contrast: hsl(220 8.9362% 46.0784%);
  --ion-color-tertiary-contrast-rgb: 106, 110, 125;
  --ion-color-tertiary-shade: hsl(268.6957 100% 86%);
  --ion-color-tertiary-tint: hsl(268.6957 100% 97%);

  --ion-color-success: hsl(142 76% 36%);
  --ion-color-success-rgb: 22, 163, 74;
  --ion-color-success-contrast: hsl(0 0% 100%);
  --ion-color-success-contrast-rgb: 255, 255, 255;
  --ion-color-success-shade: hsl(142 76% 32%);
  --ion-color-success-tint: hsl(142 76% 45%);

  --ion-color-warning: hsl(255.1351 91.7355% 76.2745%);
  --ion-color-warning-rgb: 161, 57, 245;
  --ion-color-warning-contrast: hsl(0 0% 100%);
  --ion-color-warning-contrast-rgb: 255, 255, 255;
  --ion-color-warning-shade: hsl(255.1351 91.7355% 68%);
  --ion-color-warning-tint: hsl(255.1351 91.7355% 82%);

  --ion-color-danger: hsl(0 93.5484% 81.7647%);
  --ion-color-danger-rgb: 248, 168, 168;
  --ion-color-danger-contrast: hsl(0 0% 100%);
  --ion-color-danger-contrast-rgb: 255, 255, 255;
  --ion-color-danger-shade: hsl(0 93.5484% 73%);
  --ion-color-danger-tint: hsl(0 93.5484% 88%);

  /* Ionic component-specific */
  --ion-card-background: hsl(0 0% 100%);
  --ion-item-background: hsl(0 0% 100%);
  --ion-toolbar-background: hsl(280 33.3333% 96.4706%);
  --ion-tab-bar-background: hsl(280 33.3333% 96.4706%);
  --ion-tab-bar-border-color: hsl(267.5676 90.2439% 91.9608%);

  /* Additional app colors */
  --ion-color-muted: hsl(268.6957 100% 95.4902%);
  --ion-color-muted-foreground: hsl(220 8.9362% 46.0784%);
  --ion-color-accent: hsl(292.5 44.4444% 92.9412%);
  --ion-color-accent-foreground: hsl(216.9231 19.1176% 26.6667%);
  --ion-color-popover: hsl(0 0% 100%);
  --ion-color-popover-foreground: hsl(216.9231 19.1176% 26.6667%);

  /* Domain-specific colors */
  --ion-color-expense: hsl(0 93.5484% 81.7647%);
  --ion-color-expense-foreground: hsl(0 93.5484% 81.7647%);
  --ion-color-expense-light: hsl(0 93.5484% 96%);

  --ion-color-income: hsl(142 76% 36%);
  --ion-color-income-foreground: hsl(142 76% 36%);
  --ion-color-income-light: hsl(142 76% 96%);

  --ion-color-dashboard: hsl(217 91% 60%);
  --ion-color-dashboard-foreground: hsl(217 91% 60%);
  --ion-color-dashboard-light: hsl(217 91% 96%);

  --ion-color-savings: hsl(255.1351 91.7355% 76.2745%);
  --ion-color-savings-foreground: hsl(255.1351 91.7355% 76.2745%);

  /* Design tokens */
  --radius: 1.5rem;

  /* Shadows */
  --shadow-2xs: 0px 8px 16px -4px hsl(0 0% 0% / 0.04);
  --shadow-xs: 0px 8px 16px -4px hsl(0 0% 0% / 0.04);
  --shadow-sm: 0px 8px 16px -4px hsl(0 0% 0% / 0.08), 0px 1px 2px -5px hsl(0 0% 0% / 0.08);
  --shadow: 0px 8px 16px -4px hsl(0 0% 0% / 0.08), 0px 1px 2px -5px hsl(0 0% 0% / 0.08);
  --shadow-md: 0px 8px 16px -4px hsl(0 0% 0% / 0.08), 0px 2px 4px -5px hsl(0 0% 0% / 0.08);
  --shadow-lg: 0px 8px 16px -4px hsl(0 0% 0% / 0.08), 0px 4px 6px -5px hsl(0 0% 0% / 0.08);
  --shadow-xl: 0px 8px 16px -4px hsl(0 0% 0% / 0.08), 0px 8px 10px -5px hsl(0 0% 0% / 0.08);
  --shadow-2xl: 0px 8px 16px -4px hsl(0 0% 0% / 0.2);
}

/* ============================================================================
   DARK MODE THEME - Exact HSL values from design system
   ============================================================================ */
[data-theme="dark"] {
  /* Core Ionic colors */
  --ion-background-color: hsl(24 9.8039% 10%);
  --ion-text-color: hsl(226.4516 100% 93.9216%);
  --ion-border-color: hsl(272.5 19.3548% 24.3137%);

  /* Ionic semantic colors - adjusted for dark mode */
  --ion-color-primary: hsl(255.9036 95.4023% 82.9412%);
  --ion-color-primary-rgb: 186, 88, 255;
  --ion-color-primary-contrast: hsl(24 9.8039% 10%);
  --ion-color-primary-contrast-rgb: 23, 23, 26;
  --ion-color-primary-shade: hsl(255.9036 95.4023% 74%);
  --ion-color-primary-tint: hsl(255.9036 95.4023% 88%);

  --ion-color-secondary: hsl(272.5 19.3548% 24.3137%);
  --ion-color-secondary-rgb: 71, 61, 79;
  --ion-color-secondary-contrast: hsl(216 12.1951% 83.9216%);
  --ion-color-secondary-contrast-rgb: 208, 210, 219;
  --ion-color-secondary-shade: hsl(272.5 19.3548% 22%);
  --ion-color-secondary-tint: hsl(272.5 19.3548% 30%);

  --ion-color-tertiary: hsl(265.2632 28.3582% 13.1373%);
  --ion-color-tertiary-rgb: 29, 25, 42;
  --ion-color-tertiary-contrast: hsl(217.8947 10.6145% 64.9020%);
  --ion-color-tertiary-contrast-rgb: 155, 160, 174;
  --ion-color-tertiary-shade: hsl(265.2632 28.3582% 12%);
  --ion-color-tertiary-tint: hsl(265.2632 28.3582% 18%);

  --ion-color-success: hsl(142 76% 46%);
  --ion-color-success-rgb: 28, 206, 94;
  --ion-color-success-contrast: hsl(0 0% 100%);
  --ion-color-success-contrast-rgb: 255, 255, 255;
  --ion-color-success-shade: hsl(142 76% 41%);
  --ion-color-success-tint: hsl(142 76% 55%);

  --ion-color-warning: hsl(255.9036 95.4023% 82.9412%);
  --ion-color-warning-rgb: 186, 88, 255;
  --ion-color-warning-contrast: hsl(24 9.8039% 10%);
  --ion-color-warning-contrast-rgb: 23, 23, 26;
  --ion-color-warning-shade: hsl(255.9036 95.4023% 74%);
  --ion-color-warning-tint: hsl(255.9036 95.4023% 88%);

  --ion-color-danger: hsl(0 93.5484% 81.7647%);
  --ion-color-danger-rgb: 248, 168, 168;
  --ion-color-danger-contrast: hsl(24 9.8039% 10%);
  --ion-color-danger-contrast-rgb: 23, 23, 26;
  --ion-color-danger-shade: hsl(0 93.5484% 73%);
  --ion-color-danger-tint: hsl(0 93.5484% 88%);

  /* Ionic component-specific */
  --ion-card-background: hsl(270 17.7778% 17.6471%);
  --ion-item-background: hsl(270 17.7778% 17.6471%);
  --ion-toolbar-background: hsl(24 9.8039% 10%);
  --ion-tab-bar-background: hsl(24 9.8039% 10%);
  --ion-tab-bar-border-color: hsl(272.5 19.3548% 24.3137%);

  /* Additional app colors */
  --ion-color-muted: hsl(265.2632 28.3582% 13.1373%);
  --ion-color-muted-foreground: hsl(217.8947 10.6145% 64.9020%);
  --ion-color-accent: hsl(266.8966 19.2053% 29.6078%);
  --ion-color-accent-foreground: hsl(216 12.1951% 83.9216%);
  --ion-color-popover: hsl(270 17.7778% 17.6471%);
  --ion-color-popover-foreground: hsl(226.4516 100% 93.9216%);

  /* Domain-specific colors - brighter for dark mode */
  --ion-color-expense: hsl(0 93.5484% 81.7647%);
  --ion-color-expense-foreground: hsl(0 93.5484% 81.7647%);
  --ion-color-expense-light: hsl(0 93.5484% 20%);

  --ion-color-income: hsl(142 76% 46%);
  --ion-color-income-foreground: hsl(142 76% 56%);
  --ion-color-income-light: hsl(142 76% 20%);

  --ion-color-dashboard: hsl(217 91% 70%);
  --ion-color-dashboard-foreground: hsl(217 91% 70%);
  --ion-color-dashboard-light: hsl(217 91% 20%);

  --ion-color-savings: hsl(255.9036 95.4023% 82.9412%);
  --ion-color-savings-foreground: hsl(255.9036 95.4023% 82.9412%);

  /* Shadows */
  --shadow-2xs: 0px 8px 16px -4px hsl(0 0% 0% / 0.04);
  --shadow-xs: 0px 8px 16px -4px hsl(0 0% 0% / 0.04);
  --shadow-sm: 0px 8px 16px -4px hsl(0 0% 0% / 0.08), 0px 1px 2px -5px hsl(0 0% 0% / 0.08);
  --shadow: 0px 8px 16px -4px hsl(0 0% 0% / 0.08), 0px 1px 2px -5px hsl(0 0% 0% / 0.08);
  --shadow-md: 0px 8px 16px -4px hsl(0 0% 0% / 0.08), 0px 2px 4px -5px hsl(0 0% 0% / 0.08);
  --shadow-lg: 0px 8px 16px -4px hsl(0 0% 0% / 0.08), 0px 4px 6px -5px hsl(0 0% 0% / 0.08);
  --shadow-xl: 0px 8px 16px -4px hsl(0 0% 0% / 0.08), 0px 8px 10px -5px hsl(0 0% 0% / 0.08);
  --shadow-2xl: 0px 8px 16px -4px hsl(0 0% 0% / 0.2);
}

/* ============================================================================
   TAILWIND THEME - Map to Ionic variables
   Single source of truth: Ionic CSS variables
   ============================================================================ */
@theme inline {
  /* Map shadcn/ui colors to Ionic variables */
  --color-background: var(--ion-background-color);
  --color-foreground: var(--ion-text-color);
  --color-border: var(--ion-border-color);
  --color-input: var(--ion-border-color);
  --color-ring: var(--ion-color-primary);

  --color-card: var(--ion-card-background);
  --color-card-foreground: var(--ion-text-color);

  --color-popover: var(--ion-color-popover);
  --color-popover-foreground: var(--ion-color-popover-foreground);

  --color-primary: var(--ion-color-primary);
  --color-primary-foreground: var(--ion-color-primary-contrast);

  --color-secondary: var(--ion-color-secondary);
  --color-secondary-foreground: var(--ion-color-secondary-contrast);

  --color-muted: var(--ion-color-muted);
  --color-muted-foreground: var(--ion-color-muted-foreground);

  --color-accent: var(--ion-color-accent);
  --color-accent-foreground: var(--ion-color-accent-foreground);

  --color-destructive: var(--ion-color-danger);
  --color-destructive-foreground: var(--ion-color-danger-contrast);

  /* Domain colors */
  --color-expense: var(--ion-color-expense);
  --color-expense-foreground: var(--ion-color-expense-foreground);
  --color-expense-light: var(--ion-color-expense-light);

  --color-income: var(--ion-color-income);
  --color-income-foreground: var(--ion-color-income-foreground);
  --color-income-light: var(--ion-color-income-light);

  --color-dashboard: var(--ion-color-dashboard);
  --color-dashboard-foreground: var(--ion-color-dashboard-foreground);
  --color-dashboard-light: var(--ion-color-dashboard-light);

  --color-savings: var(--ion-color-savings);
  --color-savings-foreground: var(--ion-color-savings-foreground);

  /* Chart colors - extended palette */
  --color-chart-1: hsl(255.1351 91.7355% 76.2745%);
  --color-chart-2: hsl(258.3117 89.5349% 66.2745%);
  --color-chart-3: hsl(262.1229 83.2558% 57.8431%);
  --color-chart-4: hsl(263.3898 69.9605% 50.3922%);
  --color-chart-5: hsl(263.3557 69.3023% 42.1569%);

  /* Sidebar colors (for future use) */
  --color-sidebar: var(--ion-color-secondary);
  --color-sidebar-foreground: var(--ion-color-secondary-contrast);
  --color-sidebar-primary: var(--ion-color-primary);
  --color-sidebar-primary-foreground: var(--ion-color-primary-contrast);
  --color-sidebar-accent: var(--ion-color-accent);
  --color-sidebar-accent-foreground: var(--ion-color-accent-foreground);
  --color-sidebar-border: var(--ion-border-color);
  --color-sidebar-ring: var(--ion-color-primary);

  /* Border radius */
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);

  /* Shadows - full system */
  --shadow-2xs: var(--shadow-2xs);
  --shadow-xs: var(--shadow-xs);
  --shadow-sm: var(--shadow-sm);
  --shadow: var(--shadow);
  --shadow-md: var(--shadow-md);
  --shadow-lg: var(--shadow-lg);
  --shadow-xl: var(--shadow-xl);
  --shadow-2xl: var(--shadow-2xl);
}

/* ============================================================================
   BASE STYLES - Simplified (no normalize.css conflicts)
   ============================================================================ */
@layer base {
  body {
    background-color: var(--ion-background-color);
    color: var(--ion-text-color);
  }

  * {
    border-color: var(--ion-border-color);
  }

  /* General cursor styles */
  button {
    cursor: pointer;

    &:disabled {
      cursor: not-allowed;
    }
  }
}

/* ============================================================================
   IONIC COMPONENT CUSTOMIZATIONS
   ============================================================================ */
@layer components {
  /* Tab navigation - Custom colors per tab */
  ion-tab-button {
    --color: var(--ion-color-muted-foreground);
    --color-selected: var(--ion-color-primary);
    --ripple-color: var(--ion-color-primary);
  }

  ion-tab-button[tab="dashboard"] {
    --color-selected: var(--ion-color-dashboard);
    --ripple-color: var(--ion-color-dashboard);
  }

  ion-tab-button[tab="expenses"] {
    --color-selected: var(--ion-color-expense);
    --ripple-color: var(--ion-color-expense);
  }

  ion-tab-button[tab="income"] {
    --color-selected: var(--ion-color-income);
    --ripple-color: var(--ion-color-income);
  }

  /* Ensure Ionic components follow theme */
  ion-content {
    --background: var(--ion-background-color);
  }

  ion-card {
    --background: var(--ion-card-background);
    --color: var(--ion-text-color);
  }

  /* Make lists and list items same background as cards */
  ion-list {
    --background: var(--ion-card-background);
    --ion-background-color: var(--ion-card-background);
    background: var(--ion-card-background);
  }

  ion-item {
    --background: var(--ion-card-background);
    --ion-background-color: var(--ion-card-background);
    --color: var(--ion-text-color);
    --border-color: var(--ion-border-color);
  }

  ion-toolbar {
    --background: var(--ion-toolbar-background);
    --color: var(--ion-text-color);
    --border-color: var(--ion-border-color);
  }

  ion-tab-bar {
    --background: var(--ion-tab-bar-background);
    --border: 1px solid var(--ion-tab-bar-border-color);
  }

  /* IonInput with fill="outline" styling */
  ion-input[fill="outline"] {
    --border-radius: 0.5rem;
    --padding-start: 12px;
    --padding-end: 12px;
  }

  /* IonInput validation states */
  ion-input.ion-input-error {
    --border-color: var(--ion-color-danger);
    --highlight-color: var(--ion-color-danger);
  }

  ion-input.ion-input-success {
    --border-color: var(--ion-color-success);
    --highlight-color: var(--ion-color-success);
  }

  /* IonInput filter button styling - matches category button select */
  ion-input.ion-input-filter-button {
    --placeholder-color: var(--ion-color-medium);
    --placeholder-opacity: 1;
    --color: var(--ion-color-primary);
    display: flex;
    align-items: center;
    justify-content: center;
  }

  /* Center the text and placeholder inside filter button input */
  ion-input.ion-input-filter-button input {
    text-align: center !important;
    color: var(--ion-color-primary) !important;
  }

  ion-input.ion-input-filter-button input::placeholder {
    text-align: center !important;
    color: var(--ion-color-medium) !important;
  }

  /* Position icon to the left */
  ion-input.ion-input-filter-button ion-icon[slot="start"] {
    position: absolute;
    left: 12px;
    color: var(--ion-color-primary);
  }
}
